<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HMP | Tutorial de Instrumentos Financeiros ‚Äî i18n √ó 64</title>
  <meta name="description" content="Tutorial moderno e interativo sobre contratos futuros e instrumentos financeiros, com UI/UX avan√ßada e internacionaliza√ß√£o." />
  <style>
    :root{
      --bg1:#0f1020; --bg2:#11152a; --card:#141a33cc; --text:#e8ecff; --muted:#a6b3ff; --accent:#7ad7ff; --accent2:#a97fff; --ok:#2de3a0; --warn:#ffd166; --danger:#ff6b6b; --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 20px; --glass: blur(10px) saturate(120%);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
      color:var(--text); background: radial-gradient(1200px 800px at 20% -10%, #20124a66, transparent 60%),
      radial-gradient(1000px 600px at 110% 20%, #053a5e55, transparent 60%),
      linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }
    /* Animated background orbs */
    .orbs{position:fixed; inset:0; pointer-events:none; z-index:-1; overflow:hidden}
    .orb{position:absolute; width:50vmax; height:50vmax; filter: blur(60px) saturate(160%); opacity:.22; mix-blend-mode:screen; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #7ad7ff, transparent 60%), radial-gradient(circle at 70% 70%, #a97fff, transparent 60%);
      animation: float 24s ease-in-out infinite;}
    .orb.o2{background: radial-gradient(circle at 30% 30%, #2de3a0, transparent 55%), radial-gradient(circle at 70% 70%, #ffd166, transparent 60%);
      animation-duration:30s;}
    .orb.o3{background: radial-gradient(circle at 30% 30%, #ff6b6b, transparent 55%), radial-gradient(circle at 70% 70%, #7ad7ff, transparent 60%);
      animation-duration:36s;}
    @keyframes float{0%{transform:translate(-10%, -10%) scale(1)}50%{transform:translate(10%, 10%) scale(1.1)}100%{transform:translate(-10%, -10%) scale(1)}}

    header{
      position:sticky; top:0; z-index:50; backdrop-filter:var(--glass); background: #0b0f1fcc; border-bottom:1px solid #ffffff10;
    }
    .wrap{max-width:1100px; margin:0 auto; padding:20px}
    .nav{display:flex; align-items:center; gap:14px; justify-content:space-between}
    .brand{display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.5px}
    .logo{width:36px; height:36px; border-radius:10px; background: conic-gradient(from 0deg, #7ad7ff, #a97fff, #2de3a0, #ffd166, #7ad7ff); box-shadow:0 0 20px #7ad7ff50;}
    .tag{font-size:12px; color:var(--muted)}

    .controls{display:flex; flex-wrap:wrap; gap:12px; align-items:center}
    select, button, .toggle{background:#ffffff10; color:var(--text); border:1px solid #ffffff22; border-radius:12px; padding:10px 12px; backdrop-filter:var(--glass); box-shadow:var(--shadow)}
    select{appearance:none; padding-right:34px; background-image: linear-gradient(45deg, transparent 50%, var(--muted) 50%),
        linear-gradient(135deg, var(--muted) 50%, transparent 50%);
      background-position: calc(100% - 20px) calc(1em - 2px), calc(100% - 15px) calc(1em - 2px);
      background-size: 5px 5px, 5px 5px; background-repeat:no-repeat;}
    button{cursor:pointer}
    .toggle{display:flex; gap:8px; align-items:center; cursor:pointer}

    .hero{padding:64px 20px 24px}
    .glow{font-weight:900; font-size: clamp(28px, 5vw, 52px); line-height:1.04; letter-spacing:.5px;
      background: linear-gradient(90deg, #cdd9ff, #7ad7ff, #a97fff, #2de3a0); -webkit-background-clip: text; background-clip:text; color:transparent;
      filter: drop-shadow(0 10px 25px #00000055);
    }
    .lead{color:#d6dbff; opacity:.9; max-width:70ch; margin-top:12px}

    .grid{display:grid; gap:18px}
    .cols-2{grid-template-columns: repeat(2, minmax(0, 1fr))}
    @media (max-width:900px){.cols-2{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg, #ffffff12, #ffffff06); border:1px solid #ffffff14; border-radius: var(--radius); padding:20px; box-shadow:var(--shadow)}
    .card h3{margin:0 0 8px}

    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; font-size:12px; border:1px solid #ffffff22; border-radius:999px; background:#ffffff10}

    .timeline{position:relative; margin-top:10px}
    .timeline::before{content:""; position:absolute; left:10px; top:0; bottom:0; width:2px; background:#ffffff22}
    .titem{position:relative; padding-left:36px; margin:14px 0}
    .titem::before{content:""; position:absolute; left:2px; top:6px; width:16px; height:16px; border-radius:50%; background:linear-gradient(180deg, #7ad7ff, #a97fff); box-shadow:0 0 0 3px #ffffff12}

    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:12px; background:#00000044; border:1px solid #ffffff22; padding:2px 6px; border-radius:6px}

    /* Interactive hedge widget */
    .widget{display:grid; grid-template-columns:1.2fr .8fr; gap:18px}
    @media (max-width:900px){.widget{grid-template-columns:1fr}}
    .widget .panel{border-radius:var(--radius); background:#0b0f1fcc; border:1px dashed #ffffff22; padding:16px}
    .row{display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between}
    input[type="range"]{width:100%}
    .metric{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:8px}
    .metric div{background:#ffffff0e; border:1px solid #ffffff18; padding:12px; border-radius:12px}

    /* Cards */
    .cards{display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:14px}
    @media (max-width:1100px){.cards{grid-template-columns: repeat(2, minmax(0,1fr))}}
    @media (max-width:680px){.cards{grid-template-columns: 1fr}}
    .card.hover{transition: transform .3s ease, border-color .3s ease; border-color:#ffffff18}
    .card.hover:hover{transform: translateY(-4px) scale(1.01); border-color:#7ad7ff55}

    .jargon{cursor:pointer; border-bottom:1px dashed #7ad7ff99}
    .tooltip{position:fixed; inset:auto 20px 20px auto; max-width:460px; padding:16px; border-radius:16px; background:#0b0f1ff0; border:1px solid #7ad7ff55; box-shadow:var(--shadow); display:none}

    .chips{display:flex; flex-wrap:wrap; gap:8px}
    .chip{font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid #ffffff22; background:#ffffff10}

    .footer{opacity:.8; font-size:12px; margin:32px 0}
    .floatbar{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:10px}
    .fab{background:#ffffff10; border:1px solid #ffffff22; padding:12px 14px; border-radius:14px; cursor:pointer; box-shadow:var(--shadow)}

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      .orb{animation:none}
      .card.hover:hover{transform:none}
    }
  </style>
</head>
<body>
  <div class="orbs" aria-hidden="true">
    <div class="orb o1" style="left:-10vmax; top:-10vmax"></div>
    <div class="orb o2" style="right:-8vmax; top:20vh"></div>
    <div class="orb o3" style="left:10vmax; bottom:-10vmax"></div>
  </div>

  <header>
    <div class="wrap nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div>Human Machine Party ‚Ä¢ <span data-i18n="title">Tutorial de Instrumentos Financeiros</span></div>
          <div class="tag" data-i18n="subtitle">Futuros, op√ß√µes, swaps, ETFs e jarg√£o explicado.</div>
        </div>
      </div>
      <div class="controls">
        <label class="toggle" title="Modo Profissional">
          <input id="proToggle" type="checkbox" />
          <span>üë©‚Äçüíº <span data-i18n="pro">Profissional</span></span>
        </label>
        <select id="langSelect" title="Language">
          <!-- 64 language options (labels), content falls back to EN if missing -->
          <option value="pt" selected>Portugu√™s (PT)</option>
          <option value="en">English</option>
          <option value="es">Espa√±ol</option>
          <option value="fr">Fran√ßais</option>
          <option value="de">Deutsch</option>
          <option value="it">Italiano</option>
          <option value="pt-BR">Portugu√™s (BR)</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option>
          <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
          <option value="pl">Polski</option>
          <option value="nl">Nederlands</option>
          <option value="sv">Svenska</option>
          <option value="no">Norsk</option>
          <option value="da">Dansk</option>
          <option value="fi">Suomi</option>
          <option value="et">Eesti</option>
          <option value="lv">Latvie≈°u</option>
          <option value="lt">Lietuvi≈≥</option>
          <option value="ro">Rom√¢nƒÉ</option>
          <option value="cs">ƒåe≈°tina</option>
          <option value="sk">Slovenƒçina</option>
          <option value="sl">Sloven≈°ƒçina</option>
          <option value="hu">Magyar</option>
          <option value="bg">–ë—ä–ª–≥–∞—Ä—Å–∫–∏</option>
          <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
          <option value="tr">T√ºrk√ße</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="he">◊¢◊ë◊®◊ô◊™</option>
          <option value="fa">ŸÅÿßÿ±ÿ≥€å</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
          <option value="ur">ÿßÿ±ÿØŸà</option>
          <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
          <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
          <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
          <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
          <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
          <option value="zh">‰∏≠Êñá</option>
          <option value="ja">Êó•Êú¨Ë™û</option>
          <option value="ko">ÌïúÍµ≠Ïñ¥</option>
          <option value="th">‡πÑ‡∏ó‡∏¢</option>
          <option value="vi">Ti·∫øng Vi·ªát</option>
          <option value="id">Bahasa Indonesia</option>
          <option value="ms">Bahasa Melayu</option>
          <option value="fil">Filipino</option>
          <option value="sw">Kiswahili</option>
          <option value="am">·ä†·àõ·à≠·äõ</option>
          <option value="yo">Yor√πb√°</option>
          <option value="ig">Igbo</option>
          <option value="ha">Hausa</option>
          <option value="zu">isiZulu</option>
          <option value="xh">isiXhosa</option>
          <option value="st">Sesotho</option>
          <option value="so">Soomaali</option>
          <option value="km">Khmer</option>
          <option value="lo">Lao</option>
          <option value="my">Burmese</option>
          <option value="ne">‡§®‡•á‡§™‡§æ‡§≤‡•Ä</option>
          <option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</option>
          <option value="mn">–ú–æ–Ω–≥–æ–ª</option>
          <option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
          <option value="uz">O ªzbekcha</option>
          <option value="az">Az…ôrbaycanca</option>
          <option value="ka">·É•·Éê·É†·Éó·É£·Éö·Éò</option>
          <option value="hy">’Ä’°’µ’•÷Ä’•’∂</option>
          <option value="is">√çslenska</option>
        </select>
        <button id="printBtn" title="Exportar PDF">üñ®Ô∏è <span data-i18n="print">Imprimir</span></button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="pill">‚ö° <span data-i18n="slogan">Comecemos pelo in√≠cio: como os contratos futuros mudaram a hist√≥ria.</span></div>
      <h1 class="glow" data-i18n="h1">Contratos Futuros e o Vocabul√°rio da Alta Finan√ßa</h1>
      <p class="lead" data-i18n="lead">
        De <span class="jargon" data-term="derivatives">derivados</span> a <span class="jargon" data-term="opa">OPA</span>,
        este tutorial transforma jarg√£o em clareza ‚Äî com exemplos pr√°ticos, visualiza√ß√£o de <span class="jargon" data-term="hedge">hedge</span>
        e um guia de <span class="jargon" data-term="liquidity">liquidez</span>, <span class="jargon" data-term="margin">margem</span> e
        <span class="jargon" data-term="leverage">alavancagem</span>.
      </p>
    </section>

    <section class="grid cols-2">
      <article class="card">
        <h3>üìú <span data-i18n="hist_title">Contexto hist√≥rico ‚Äî por que os futuros revolucionaram os mercados</span></h3>
        <p data-i18n="hist_1">
          Mercados de futuros surgiram para estabilizar pre√ßos de bens-mercantis: produtores e compradores reduzem incerteza, planeiam estoques, cr√©dito e investimentos.
        </p>
        <div class="timeline">
          <div class="titem"><strong data-i18n="hist_a">S√©culo XVIII</strong> ‚Äî <span data-i18n="hist_a_txt">acordos padronizados em mercados de arroz no Jap√£o criam base dos ‚Äúcontratos a termo‚Äù.</span></div>
          <div class="titem"><strong data-i18n="hist_b">S√©culo XIX</strong> ‚Äî <span data-i18n="hist_b_txt">bolsas especializadas padronizam contratos, margem e compensa√ß√£o por c√¢mara de liquida√ß√£o.</span></div>
          <div class="titem"><strong data-i18n="hist_c">Anos 1970+</strong> ‚Äî <span data-i18n="hist_c_txt">surgem futuros financeiros (moedas, taxas), alargando a gest√£o de risco para al√©m de commodities.</span></div>
          <div class="titem"><strong data-i18n="hist_d">S√©culo XXI</strong> ‚Äî <span data-i18n="hist_d_txt">preg√£o eletr√≥nico, alta liquidez e acesso global democratizam o uso de derivados.</span></div>
        </div>
      </article>

      <article class="card">
        <h3>üîÅ <span data-i18n="how_title">Como os contratos futuros mudam de m√£os</span></h3>
        <ul>
          <li data-i18n="how_1">Contratos s√£o padronizados e negociados em bolsa; a c√¢mara de compensa√ß√£o √© a contraparte central.</li>
          <li data-i18n="how_2">Posi√ß√µes exigem margem inicial e sofrem <em>mark-to-market</em> (ajustes di√°rios de ganhos/perdas).</li>
          <li data-i18n="how_3">O comprador pode vender o contrato antes do vencimento; o vendedor pode recompr√°-lo ‚Äî a maioria ‚Äúfecha‚Äù posi√ß√µes.</li>
          <li data-i18n="how_4">Poucos contratos terminam com entrega f√≠sica; o resultado √© financeiro na maioria dos casos.</li>
        </ul>
        <div class="chips">
          <span class="chip jargon" data-term="open_interest">Open interest</span>
          <span class="chip jargon" data-term="basis">Base</span>
          <span class="chip jargon" data-term="contango">Contango</span>
          <span class="chip jargon" data-term="backwardation">Backwardation</span>
        </div>
      </article>
    </section>

    <section class="card" style="margin-top:18px">
      <h3>üåΩ <span data-i18n="corn_title">Exemplo interativo: milho e o equil√≠brio entre seguran√ßa e oportunidade</span></h3>
      <p data-i18n="corn_desc">Bloquear o pre√ßo de parte da produ√ß√£o com futuros protege contra quedas, sem abdicar de ganhos na por√ß√£o n√£o protegida.</p>
      <div class="widget">
        <div class="panel">
          <div class="row">
            <label for="qty"><span data-i18n="corn_qty">Produ√ß√£o esperada (toneladas)</span></label>
            <input type="number" id="qty" value="500" min="10" step="10" />
          </div>
          <div class="row">
            <label for="hedge">% <span class="jargon" data-term="hedge">hedge</span></label>
            <input type="range" id="hedge" min="0" max="100" value="40" />
          </div>
          <div class="row">
            <label for="fpx" data-i18n="corn_fpx">Pre√ßo futuro travado (‚Ç¨/t)</label>
            <input type="number" id="fpx" value="190" step="1" />
          </div>
          <div class="row">
            <label for="spx" data-i18n="corn_spx">Pre√ßo spot no colheita (‚Ç¨/t)</label>
            <input type="number" id="spx" value="160" step="1" />
          </div>
          <div class="metric">
            <div><strong data-i18n="corn_locked">Receita protegida</strong><div id="locked">‚Äî</div></div>
            <div><strong data-i18n="corn_open">Receita aberta</strong><div id="open">‚Äî</div></div>
            <div><strong data-i18n="corn_futpnl">PNL Futuros</strong><div id="futpnl">‚Äî</div></div>
            <div><strong data-i18n="corn_total">Receita total estimada</strong><div id="total">‚Äî</div></div>
          </div>
          <p class="tag" data-i18n="corn_note">O hedge reduz volatilidade: parte vendida a pre√ßo travado; restante beneficia de altas, sofre em quedas.</p>
        </div>
        <div class="panel">
          <h4>üß≠ <span data-i18n="corn_take">Intui√ß√£o</span></h4>
          <ul>
            <li data-i18n="corn_take1">Se o spot cair abaixo do futuro, o ganho nos contratos compensa a menor receita de venda f√≠sica.</li>
            <li data-i18n="corn_take2">Se o spot subir, a por√ß√£o n√£o protegida capta pre√ßos melhores; contratos podem gerar perda compensada pelo f√≠sico.</li>
            <li data-i18n="corn_take3">Escolher a % de hedge √© equilibrar seguran√ßa de caixa com oportunidade de lucro.</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:18px">
      <h3>üß∞ <span data-i18n="ins_title">Outros instrumentos</span> ‚Äî <span data-i18n="ins_sub">explica√ß√µes r√°pidas</span></h3>
      <div class="cards" id="cards"></div>
      <p class="tag" data-i18n="risk_note">Aviso: instrumentos como op√ß√µes bin√°rias e derivados alavancados comportam riscos elevados e podem n√£o ser adequados a todos.</p>
    </section>

    <section class="grid cols-2" style="margin-top:18px">
      <article class="card hover">
        <h3>üìö <span data-i18n="gloss_title">Gloss√°rio de jarg√£o</span></h3>
        <p data-i18n="gloss_intro">Toque nos termos sublinhados para ver uma explica√ß√£o objetiva em linguagem clara.</p>
        <div class="chips" id="glossChips"></div>
      </article>
      <article class="card hover">
        <h3>üß© <span data-i18n="modes_title">Do b√°sico ao profissional</span></h3>
        <p data-i18n="modes_txt">Ative o modo <em>Profissional</em> para ver notas t√©cnicas: base, contango/backwardation, greeks, chamadas de margem, liquidez, volatilidade impl√≠cita.</p>
        <ul>
          <li class="pro" data-i18n="m1">Base = pre√ßo spot ‚àí pre√ßo futuro. Diverge at√© convergir no vencimento.</li>
          <li class="pro" data-i18n="m2">Contango/backwardation refletem custos de carregamento, escassez e expectativas.</li>
          <li class="pro" data-i18n="m3">Greeks (Œî, Œì, Œò, Vega) medem sensibilidade de op√ß√µes a movimentos e tempo.</li>
          <li class="pro" data-i18n="m4">Margin calls: aportar capital quando perdas superam n√≠veis de manuten√ß√£o.</li>
        </ul>
      </article>
    </section>

    <div class="footer">
      <p data-i18n="legal">Este conte√∫do √© educacional. N√£o constitui aconselhamento financeiro. Verifique regras locais, fiscais e de suitability.</p>
    </div>
  </main>

  <div class="tooltip" id="tip"></div>
  <div class="floatbar">
    <button class="fab" id="scrollTop">‚¨ÜÔ∏è</button>
  </div>

  <script>
  // ===== i18n strings (full PT+EN; others fallback to EN) =====
  const i18n = {
    en:{
      title:"Financial Instruments Tutorial",
      subtitle:"Futures, options, swaps, ETFs and jargon explained.",
      slogan:"Start at the beginning: how futures changed history.",
      h1:"Futures Contracts & the Language of High Finance",
      lead:"From derivatives to takeover bids, this tutorial turns jargon into clarity‚Äîwith a hedge visualizer and liquidity/margin/leverage guide.",
      hist_title:"Historical context ‚Äî why futures revolutionized markets",
      hist_1:"Futures emerged to stabilize commodity prices: sellers and buyers reduce uncertainty, plan inventories, credit and investment.",
      hist_a:"18th century", hist_a_txt:"standardized agreements in Japanese rice markets set the basis for forward contracts.",
      hist_b:"19th century", hist_b_txt:"specialized exchanges standardize contracts, margin and clearing.",
      hist_c:"1970s+", hist_c_txt:"financial futures (FX, rates) expand risk management beyond commodities.",
      hist_d:"21st century", hist_d_txt:"electronic trading, high liquidity and global access democratize derivatives.",
      how_title:"How futures change hands",
      how_1:"Contracts are standardized and exchange-traded; the clearing house is the central counterparty.",
      how_2:"Positions require initial margin and are marked-to-market with daily P/L adjustments.",
      how_3:"Buyers can sell before expiry; sellers can buy back‚Äîmost positions are closed out.",
      how_4:"Few contracts end with physical delivery; most settle financially.",
      corn_title:"Interactive example: corn‚Äîbalancing safety and opportunity",
      corn_desc:"Locking a price for part of production hedges downside without giving up upside on the open portion.",
      corn_qty:"Expected output (tons)", corn_fpx:"Futures price locked (‚Ç¨/t)", corn_spx:"Spot price at harvest (‚Ç¨/t)",
      corn_locked:"Protected revenue", corn_open:"Open revenue", corn_futpnl:"Futures P/L", corn_total:"Estimated total revenue",
      corn_note:"Hedging lowers volatility: some sold at locked price; the rest rides the market.",
      corn_take:"Intuition", corn_take1:"If spot < future, futures gains offset lower cash revenue.",
      corn_take2:"If spot rises, unhedged portion benefits; futures may lose but cash sales win.",
      corn_take3:"Pick the hedge % to balance cash certainty with opportunity.",
      ins_title:"Other instruments", ins_sub:"quick explanations",
      risk_note:"Warning: instruments like binary options and leveraged derivatives carry high risks and may be unsuitable for everyone.",
      gloss_title:"Jargon glossary", gloss_intro:"Tap underlined terms to see plain-language explanations.",
      modes_title:"From basic to professional", modes_txt:"Enable Professional mode for technical notes: basis, contango/backwardation, greeks, margin calls, liquidity, implied volatility.",
      m1:"Basis = spot ‚àí future. Diverges then converges by expiry.", m2:"Contango/backwardation reflect carry costs, scarcity and expectations.", m3:"Greeks (Œî, Œì, Œò, Vega) measure option sensitivities to moves and time.", m4:"Margin calls: post funds when losses breach maintenance levels.",
      legal:"Educational only. Not financial advice. Check local rules, taxes and suitability.",
      print:"Print", pro:"Professional",
    },
    pt:{
      title:"Tutorial de Instrumentos Financeiros",
      subtitle:"Futuros, op√ß√µes, swaps, ETFs e jarg√£o explicado.",
      slogan:"Comecemos pelo in√≠cio: como os contratos futuros mudaram a hist√≥ria.",
      h1:"Contratos Futuros e o Vocabul√°rio da Alta Finan√ßa",
      lead:"De derivados a ofertas p√∫blicas de aquisi√ß√£o, este tutorial traduz jarg√£o em clareza ‚Äî com visualizador de hedge e guia de liquidez/margem/alavancagem.",
      hist_title:"Contexto hist√≥rico ‚Äî por que os futuros revolucionaram os mercados",
      hist_1:"Os futuros estabilizam pre√ßos de commodities: vendedores e compradores reduzem incerteza, planeiam stocks, cr√©dito e investimento.",
      hist_a:"S√©culo XVIII", hist_a_txt:"acordos padronizados em mercados de arroz no Jap√£o fundamentam contratos a termo.",
      hist_b:"S√©culo XIX", hist_b_txt:"bolsas especializadas padronizam contratos, margem e compensa√ß√£o.",
      hist_c:"Anos 1970+", hist_c_txt:"futuros financeiros (c√¢mbio, taxas) expandem a gest√£o de risco al√©m das commodities.",
      hist_d:"S√©culo XXI", hist_d_txt:"preg√£o eletr√≥nico, alta liquidez e acesso global democratizam derivativos.",
      how_title:"Como os contratos futuros mudam de m√£os",
      how_1:"Contratos padronizados negociados em bolsa; a c√¢mara de compensa√ß√£o √© contraparte central.",
      how_2:"Posi√ß√µes exigem margem inicial e ajustes di√°rios (mark-to-market).",
      how_3:"Compradores podem vender antes do vencimento; vendedores recompram ‚Äî maioria fecha posi√ß√µes.",
      how_4:"Poucos terminam com entrega f√≠sica; prevalece liquida√ß√£o financeira.",
      corn_title:"Exemplo interativo: milho ‚Äî equil√≠brio entre seguran√ßa e oportunidade",
      corn_desc:"Travar pre√ßo de parte da produ√ß√£o protege contra quedas, mantendo potencial de alta na parcela aberta.",
      corn_qty:"Produ√ß√£o esperada (toneladas)", corn_fpx:"Pre√ßo futuro travado (‚Ç¨/t)", corn_spx:"Pre√ßo spot na colheita (‚Ç¨/t)",
      corn_locked:"Receita protegida", corn_open:"Receita aberta", corn_futpnl:"PNL Futuros", corn_total:"Receita total estimada",
      corn_note:"O hedge reduz volatilidade: parte vendida a pre√ßo travado; restante flutua com o mercado.",
      corn_take:"Intui√ß√£o", corn_take1:"Se spot < futuro, o ganho em futuros compensa a menor receita do f√≠sico.",
      corn_take2:"Se spot sobe, a parte n√£o protegida captura pre√ßos melhores; futuros podem perder, mas o f√≠sico ganha.",
      corn_take3:"Escolha a % de hedge para balancear certeza de caixa com oportunidade.",
      ins_title:"Outros instrumentos", ins_sub:"explica√ß√µes r√°pidas",
      risk_note:"Aviso: op√ß√µes bin√°rias e derivados alavancados t√™m risco elevado e podem ser inadequados para muitos investidores.",
      gloss_title:"Gloss√°rio de jarg√£o", gloss_intro:"Toque nos termos sublinhados para uma explica√ß√£o clara.",
      modes_title:"Do b√°sico ao profissional", modes_txt:"Ative o modo Profissional para notas t√©cnicas: base, contango/backwardation, greeks, chamadas de margem, liquidez, volatilidade impl√≠cita.",
      m1:"Base = spot ‚àí futuro. Diverge e converge no vencimento.", m2:"Contango/backwardation refletem custos de carregamento, escassez e expectativas.", m3:"Greeks (Œî, Œì, Œò, Vega) medem sensibilidade de op√ß√µes a movimentos e tempo.", m4:"Margin calls: aportar fundos quando perdas superam o n√≠vel de manuten√ß√£o.",
      legal:"Conte√∫do educacional. N√£o √© aconselhamento financeiro. Verifique regras locais, impostos e adequa√ß√£o.",
      print:"Imprimir", pro:"Profissional",
    }
  };

  // Instrument cards (20-words max each, PT and EN)
  const instruments = [
    {key:'bin', icon:'üéØ', pt:"Op√ß√µes Bin√°rias ‚Äî aposta em alta/baixa; retorno fixo ou perda total. Risco elevad√≠ssimo.", en:"Binary Options ‚Äî bet up/down; fixed payoff or total loss. Very high risk."},
    {key:'call', icon:'üü¢', pt:"Op√ß√£o Call ‚Äî direito de comprar ativo a pre√ßo (strike) at√© vencimento.", en:"Call Option ‚Äî right to buy an asset at strike price until expiry."},
    {key:'put', icon:'üî¥', pt:"Op√ß√£o Put ‚Äî direito de vender ativo a pre√ßo (strike) at√© vencimento.", en:"Put Option ‚Äî right to sell an asset at strike price until expiry."},
    {key:'irs', icon:'üîÅ', pt:"Swap de Taxa ‚Äî troca juros fixos por vari√°veis para gerir risco de taxa.", en:"Interest Rate Swap ‚Äî exchange fixed for floating to manage rate risk."},
    {key:'ccs', icon:'üåç', pt:"Swap Cambial ‚Äî troca principal+juros em moedas distintas; protege FX.", en:"Cross-Currency Swap ‚Äî exchange principal+interest in different currencies; hedge FX."},
    {key:'fwd', icon:'üìÑ', pt:"Forward ‚Äî contrato privado para comprar/vender no futuro a pre√ßo fixo.", en:"Forward ‚Äî private agreement to buy/sell in the future at fixed price."},
    {key:'etf', icon:'üìà', pt:"ETF ‚Äî fundo em bolsa que replica √≠ndice/setor/commodities.", en:"ETF ‚Äî exchange-traded fund tracking index/sector/commodities."},
    {key:'cds', icon:'üõ°Ô∏è', pt:"CDS ‚Äî prote√ß√£o contra incumprimento de d√≠vida; vendedor assume risco mediante pr√©mio.", en:"CDS ‚Äî default protection; seller assumes credit risk for a premium."},
    {key:'war', icon:'üéüÔ∏è', pt:"Warrant ‚Äî direito de comprar a√ß√µes da empresa a pre√ßo fixo.", en:"Warrant ‚Äî right to buy issuer's shares at a fixed price."},
    {key:'str', icon:'üß™', pt:"Certificado Estruturado ‚Äî combina d√≠vida e op√ß√µes para payoff condicionado.", en:"Structured Note ‚Äî combines debt and options for conditional payoff."},
    {key:'idx', icon:'üóÇÔ∏è', pt:"Futuros de √çndice ‚Äî exposi√ß√£o t√°tica √† bolsa sem comprar cada a√ß√£o.", en:"Index Futures ‚Äî tactical equity exposure without buying each stock."},
    {key:'fxf', icon:'üí±', pt:"Futuros de Moeda ‚Äî fixam taxa de c√¢mbio futura; hedge de receitas/custos.", en:"FX Futures ‚Äî lock future exchange rate; hedge revenues/costs."}
  ];

  // Glossary terms
  const glossary = {
    derivatives:{pt:"Instrumentos cujo valor deriva de outro ativo (subjacente). Incluem futuros, op√ß√µes, swaps.", en:"Instruments whose value derives from another asset (underlying). Includes futures, options, swaps."},
    hedge:{pt:"Estrat√©gia para reduzir risco, travando pre√ßos ou compensando perdas com ganhos.", en:"Risk-reduction strategy by locking prices or offsetting losses with gains."},
    liquidity:{pt:"Facilidade de comprar/vender sem afetar pre√ßo. Alta liquidez = spreads menores.", en:"Ease of trading without moving price. High liquidity = tighter spreads."},
    margin:{pt:"Colateral exigido para manter posi√ß√µes. Ajustado diariamente.", en:"Collateral required to maintain positions. Adjusted daily."},
    leverage:{pt:"Exposi√ß√£o superior ao capital pr√≥prio, amplificando ganhos e perdas.", en:"Exposure exceeding own capital, amplifying gains and losses."},
    open_interest:{pt:"N.¬∫ de contratos abertos n√£o compensados. Mede participa√ß√£o do mercado.", en:"Number of outstanding, not-offset contracts. Measures market participation."},
    basis:{pt:"Spot ‚àí Futuro. Converge no vencimento; base risk afeta hedges.", en:"Spot ‚àí Future. Converges at expiry; basis risk affects hedges."},
    contango:{pt:"Futuro > spot; custo de carregamento positivo.", en:"Future > spot; positive cost of carry."},
    backwardation:{pt:"Futuro < spot; escassez imediata/valor conveni√™ncia.", en:"Future < spot; near-term scarcity/convenience yield."},
    opa:{pt:"Oferta P√∫blica de Aquisi√ß√£o: proposta para comprar controle de empresa listada.", en:"Takeover Bid: public offer to acquire control of a listed company."}
  };

  // ===== populate instrument cards =====
  const cardsBox = document.getElementById('cards');
  function renderCards(lang){
    cardsBox.innerHTML = '';
    instruments.forEach(it =>{
      const text = (lang.startsWith('pt')? it.pt : it.en);
      const el = document.createElement('div');
      el.className = 'card hover';
      el.innerHTML = `<div class="pill">${it.icon} <span>${it.key.toUpperCase()}</span></div><p>${text}</p>`;
      cardsBox.appendChild(el);
    });
  }

  // ===== render glossary chips =====
  const chips = document.getElementById('glossChips');
  function renderGloss(lang){
    chips.innerHTML = '';
    Object.keys(glossary).forEach(k=>{
      const chip = document.createElement('span');
      chip.className='chip jargon'; chip.dataset.term=k; chip.textContent=k.replace('_',' ');
      chips.appendChild(chip);
    });
  }

  // ===== translations applier =====
  function applyI18n(lang){
    const dict = i18n[lang] || i18n.en;
    document.querySelectorAll('[data-i18n]').forEach(node=>{
      const key = node.getAttribute('data-i18n');
      node.innerText = (dict[key] || i18n.en[key] || node.innerText);
    });
    renderCards(lang); renderGloss(lang);
  }

  // ===== tooltip for jargon =====
  const tip = document.getElementById('tip');
  function showTip(term, lang, anchor){
    const def = (glossary[term] && (glossary[term][lang] || glossary[term].en)) || '‚Äî';
    tip.innerText = def; tip.style.display='block';
  }
  function hideTip(){tip.style.display='none'}
  document.addEventListener('click', (e)=>{
    const t = e.target.closest('.jargon');
    if(t){ showTip(t.dataset.term, currentLang, t); }
    else hideTip();
  });

  // ===== pro mode =====
  const proToggle = document.getElementById('proToggle');
  function setPro(on){
    document.querySelectorAll('.pro').forEach(n=> n.style.display = on? 'list-item':'none');
  }
  proToggle.addEventListener('change', ()=> setPro(proToggle.checked));

  // ===== corn widget logic =====
  const qty = document.getElementById('qty');
  const hedge = document.getElementById('hedge');
  const fpx = document.getElementById('fpx');
  const spx = document.getElementById('spx');
  const locked = document.getElementById('locked');
  const open = document.getElementById('open');
  const futpnl = document.getElementById('futpnl');
  const total = document.getElementById('total');

  function fmt(n){return new Intl.NumberFormat(undefined,{style:'currency',currency:'EUR',maximumFractionDigits:0}).format(n)}
  function recalc(){
    const Q = +qty.value || 0; const H = (+hedge.value||0)/100; const F=+fpx.value||0; const S=+spx.value||0;
    const qH = Q*H; const qO = Q-qH; // quantities hedged and open
    const revLocked = qH * F; // futures-locked price for hedged qty
    const revOpen = qO * S; // open revenue at spot
    const pnlFut = (F - S) * qH; // short futures payoff if producer hedges by selling futures
    const revTotal = revOpen + revLocked + pnlFut; // simplified intuition
    locked.innerText = fmt(revLocked);
    open.innerText = fmt(revOpen);
    futpnl.innerText = fmt(pnlFut);
    total.innerText = fmt(revTotal);
  }
  [qty, hedge, fpx, spx].forEach(el=> el.addEventListener('input', recalc));

  // ===== language switch & print =====
  const langSelect = document.getElementById('langSelect');
  let currentLang = 'pt';
  langSelect.addEventListener('change', ()=>{ currentLang = langSelect.value; applyI18n(currentLang); recalc();});
  document.getElementById('printBtn').addEventListener('click', ()=> window.print());

  // scroll top
  document.getElementById('scrollTop').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

  // init
  setPro(false); applyI18n(currentLang); recalc();
  </script>
</body>
</html>
